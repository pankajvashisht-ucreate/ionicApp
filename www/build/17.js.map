{"version":3,"sources":["../../src/pages/allchat/allchat.module.ts","../../src/pages/allchat/allchat.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AllchatPage } from './allchat';\n\n@NgModule({\n  declarations: [\n    AllchatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AllchatPage),\n  ],\n})\nexport class AllchatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/allchat/allchat.module.ts","import { Component,ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams,ToastController,AlertController,InfiniteScroll } from 'ionic-angular';\nimport { Content } from 'ionic-angular/index';\nimport { ApisProvider,SessionProvider } from '../../providers/providers';\n/**\n * Generated class for the AllchatPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-allchat',\n  templateUrl: 'allchat.html',\n})\n\nexport class AllchatPage {\n  @ViewChild(Content) content: Content;\n  messages :string;\n  image :any ;\n  text :any;\n  user_id :any;\n  thread_id:number;\n  public all_message:any = [];\n  is_show:boolean;\n  userdata:any;\n  myimage:string;\n  validresponse:any;\n  another_user_name:string;\n  another_user_image:string;\n  authkey:string;\n  message:string;\n  friend_id:string;\n  product_id:string;\n  type:string='0';\n  user_info:any=[];\n  page:number=1;\n  total_record:number;\n  displaychat:string='chat';\n  constructor(private api :ApisProvider,public toastCtrl:ToastController, private session:SessionProvider,public navCtrl: NavController, public navParams: NavParams) {\n    if(this.navParams.get('product_id')){\n      this.product_id=this.navParams.get('product_id');\n      this.friend_id=this.navParams.get('user_id');\n    }else{\n      this.navCtrl.push('HomePage');\n    }\n    if(this.session.get_session('user_info')){\n      this.user_info=this.session.get_session('user_info');\n    }else{\n      this.navCtrl.push('HomePage');\n    }\n    if(this.navParams.get('message')){\n      //message\n      console.log(this.navParams.get('message'));\n      this.all_message=this.navParams.get('message');\n      this.total_record=this.all_message.length;\n    }else{\n      this.get_message();\n    }\n    if(this.navParams.get('product_name')){\n      console.log(this.navParams.get('product_name'));\n      this.displaychat=this.navParams.get('product_name');\n    }\n    //this.get_message();\n  }\n\n  ionViewDidLoad() {\n   \n    console.log('ionViewDidLoad AllchatPage');\n  }\n\n  ngAfterViewChecked() {\n    //this.scrollBottom();\n    \n  }\n\nget_message(){\n this.api.get_message(this.friend_id,this.product_id,this.page,this.user_info['auth_key']).then((data:any) => {\n  this.all_message=data;\n  console.log(this.all_message);\n  this.is_show=false;\n  this.total_record=this.all_message.length;\n  console.log(this.total_record);\n}).catch((err)=> {\n  let toast = this.toastCtrl.create({\n    message: err,\n    duration: 3000,\n    position: 'buttom'\n   });\n  toast.present();\n});\n}\n\n\nscrollBottom(){\n  this.content.resize();\n  this.content.scrollTo(0, this.content.scrollHeight, 350);\n}\n\nsend_message(){\n\nif(this.message=='' || this.message== undefined){\n  let toast = this.toastCtrl.create({\n       message: \"Please Enter the Message\",\n       duration: 3000,\n       position: 'buttom'\n      });\n   toast.present();\n   return ;\n}\nlet object={\n  'is_send':1,\n  'message':this.message,\n  'type':0,\n  'created': new Date().getTime()/1000,\n  'sender_id':this.user_info.id,\n  'product_id':this.product_id,\n  'receiver_id':this.friend_id,\n  'another_user':''\n};\nthis.all_message.push(object);\nthis.scrollBottom();\nthis.message='';\nthis.api.send_message(this.friend_id,this.product_id,this.type,object.message,this.user_info['auth_key']);\n\n}\n\n time_ago(previous) {\n  let current= new Date().getTime();\n  previous=previous*1000;\n  let msPerMinute = 60 * 1000;\n  let msPerHour = msPerMinute * 60;\n  let msPerDay = msPerHour * 24;\n  let msPerMonth = msPerDay * 30;\n  let msPerYear = msPerDay * 365;\n  let elapsed = current - previous;\n  if (elapsed < msPerMinute) {\n       return Math.round(elapsed/1000) + ' seconds ago';   \n  }\n  else if (elapsed < msPerHour) {\n       return Math.round(elapsed/msPerMinute) + ' minutes ago';   \n  }\n  else if (elapsed < msPerDay ) {\n       return Math.round(elapsed/msPerHour ) + ' hours ago';   \n  }\n  else if (elapsed < msPerMonth) {\n      return  Math.round(elapsed/msPerDay) + ' days ago';   \n  }\n  else if (elapsed < msPerYear) {\n      return  Math.round(elapsed/msPerMonth) + ' months ago';   \n  }\n  else {\n      return  Math.round(elapsed/msPerYear ) + ' years ago';   \n  }\n}\n\nstring_message(message:string){\n  return atob(message);\n}\nback(){\n  this.navCtrl.pop();\n}\npagination(infiniteScroll){\n  this.page++;\n  this.api.get_message(this.friend_id,this.product_id,this.page,this.user_info['auth_key']).then((data:any )=> {\n    this.total_record=data.length;\n    for(let i=0;i<data.length;i++){\n      this.all_message.unshift(data[i]);\n    }\n    infiniteScroll.complete();\n  }).catch((error:any) => {\n   // this.toast_message(\"No For Product\");\n    this.total_record=0;\n  });\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/allchat/allchat.ts"],"sourceRoot":""}